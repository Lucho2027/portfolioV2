import{i as $,r as k,k as S,j as ce,l as x,m as pe,n as ve,Y as D,q as me,_ as fe,s as be,Z as ge,v as Y,y as ee,A as ye,B as Z,$ as Ie,C as Me,D as N,o as M,g as P,w,G as R,a as U,K as G,b as B,a0 as he,T as ke,L as E,c as T,Q as H,F as _,a1 as Se,t as J,d as Re,E as K,e as te}from"./entry.wHsg6pmn.js";import{_ as ae}from"./Avatar.nKRWYc65.js";import ne from"./Kbd.ZwJdcxDU.js";import{u as we}from"./usePopper.MHtYkl6o.js";import{o as y,u as Te,H as F,t as V,N as W,a as g}from"./dom.iXLDqDcr.js";import{p as Pe,u as De,x as Oe,a as h}from"./use-tracked-pointer.oKsiiWzr.js";import{c as Ce,l as L,p as $e}from"./open-closed.6hl3ScU0.js";import{b as Ae}from"./use-resolve-button-type.Bpu4sVsY.js";import{w as Ne,h as Be,v as Ee,N as X,_ as oe,O as He}from"./focus-management.3FvFoO9X.js";import{y as Le}from"./use-outside-click.Z1BzIPZ1.js";import{p as Fe}from"./use-text-value.HpsXqfZd.js";import"./index.2tcjgzho.js";import"./index.Or-kM3Tj.js";var je=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(je||{}),Ue=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Ue||{});function _e(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let ue=Symbol("MenuContext");function j(e){let m=me(ue,null);if(m===null){let I=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(I,j),I}return m}let Ke=$({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:m,attrs:I}){let b=k(1),t=k(null),f=k(null),u=k([]),c=k(""),s=k(null),r=k(1);function a(l=i=>i){let i=s.value!==null?u.value[s.value]:null,o=He(l(u.value.slice()),d=>y(d.dataRef.domRef)),n=i?o.indexOf(i):null;return n===-1&&(n=null),{items:o,activeItemIndex:n}}let v={menuState:b,buttonRef:t,itemsRef:f,items:u,searchQuery:c,activeItemIndex:s,activationTrigger:r,closeMenu:()=>{b.value=1,s.value=null},openMenu:()=>b.value=0,goToItem(l,i,o){let n=a(),d=Oe(l===h.Specific?{focus:h.Specific,id:i}:{focus:l},{resolveItems:()=>n.items,resolveActiveIndex:()=>n.activeItemIndex,resolveId:p=>p.id,resolveDisabled:p=>p.dataRef.disabled});c.value="",s.value=d,r.value=o??1,u.value=n.items},search(l){let i=c.value!==""?0:1;c.value+=l.toLowerCase();let o=(s.value!==null?u.value.slice(s.value+i).concat(u.value.slice(0,s.value+i)):u.value).find(d=>d.dataRef.textValue.startsWith(c.value)&&!d.dataRef.disabled),n=o?u.value.indexOf(o):-1;n===-1||n===s.value||(s.value=n,r.value=1)},clearSearch(){c.value=""},registerItem(l,i){let o=a(n=>[...n,{id:l,dataRef:i}]);u.value=o.items,s.value=o.activeItemIndex,r.value=1},unregisterItem(l){let i=a(o=>{let n=o.findIndex(d=>d.id===l);return n!==-1&&o.splice(n,1),o});u.value=i.items,s.value=i.activeItemIndex,r.value=1}};return Le([t,f],(l,i)=>{var o;v.closeMenu(),Ne(i,Be.Loose)||(l.preventDefault(),(o=y(t))==null||o.focus())},S(()=>b.value===0)),ce(ue,v),Ce(S(()=>Te(b.value,{0:L.Open,1:L.Closed}))),()=>{let l={open:b.value===0,close:v.closeMenu};return F({ourProps:{},theirProps:e,slot:l,slots:m,attrs:I,name:"Menu"})}}}),Ve=$({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:()=>`headlessui-menu-button-${V()}`}},setup(e,{attrs:m,slots:I,expose:b}){let t=j("MenuButton");b({el:t.buttonRef,$el:t.buttonRef});function f(r){switch(r.key){case g.Space:case g.Enter:case g.ArrowDown:r.preventDefault(),r.stopPropagation(),t.openMenu(),D(()=>{var a;(a=y(t.itemsRef))==null||a.focus({preventScroll:!0}),t.goToItem(h.First)});break;case g.ArrowUp:r.preventDefault(),r.stopPropagation(),t.openMenu(),D(()=>{var a;(a=y(t.itemsRef))==null||a.focus({preventScroll:!0}),t.goToItem(h.Last)});break}}function u(r){switch(r.key){case g.Space:r.preventDefault();break}}function c(r){e.disabled||(t.menuState.value===0?(t.closeMenu(),D(()=>{var a;return(a=y(t.buttonRef))==null?void 0:a.focus({preventScroll:!0})})):(r.preventDefault(),t.openMenu(),_e(()=>{var a;return(a=y(t.itemsRef))==null?void 0:a.focus({preventScroll:!0})})))}let s=Ae(S(()=>({as:e.as,type:m.type})),t.buttonRef);return()=>{var r;let a={open:t.menuState.value===0},{id:v,...l}=e,i={ref:t.buttonRef,id:v,type:s.value,"aria-haspopup":"menu","aria-controls":(r=y(t.itemsRef))==null?void 0:r.id,"aria-expanded":t.menuState.value===0,onKeydown:f,onKeyup:u,onClick:c};return F({ourProps:i,theirProps:l,slot:a,attrs:m,slots:I,name:"MenuButton"})}}}),ze=$({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:()=>`headlessui-menu-items-${V()}`}},setup(e,{attrs:m,slots:I,expose:b}){let t=j("MenuItems"),f=k(null);b({el:t.itemsRef,$el:t.itemsRef}),Pe({container:S(()=>y(t.itemsRef)),enabled:S(()=>t.menuState.value===0),accept(a){return a.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:a.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(a){a.setAttribute("role","none")}});function u(a){var v;switch(f.value&&clearTimeout(f.value),a.key){case g.Space:if(t.searchQuery.value!=="")return a.preventDefault(),a.stopPropagation(),t.search(a.key);case g.Enter:if(a.preventDefault(),a.stopPropagation(),t.activeItemIndex.value!==null){let l=t.items.value[t.activeItemIndex.value];(v=y(l.dataRef.domRef))==null||v.click()}t.closeMenu(),oe(y(t.buttonRef));break;case g.ArrowDown:return a.preventDefault(),a.stopPropagation(),t.goToItem(h.Next);case g.ArrowUp:return a.preventDefault(),a.stopPropagation(),t.goToItem(h.Previous);case g.Home:case g.PageUp:return a.preventDefault(),a.stopPropagation(),t.goToItem(h.First);case g.End:case g.PageDown:return a.preventDefault(),a.stopPropagation(),t.goToItem(h.Last);case g.Escape:a.preventDefault(),a.stopPropagation(),t.closeMenu(),D(()=>{var l;return(l=y(t.buttonRef))==null?void 0:l.focus({preventScroll:!0})});break;case g.Tab:a.preventDefault(),a.stopPropagation(),t.closeMenu(),D(()=>Ee(y(t.buttonRef),a.shiftKey?X.Previous:X.Next));break;default:a.key.length===1&&(t.search(a.key),f.value=setTimeout(()=>t.clearSearch(),350));break}}function c(a){switch(a.key){case g.Space:a.preventDefault();break}}let s=$e(),r=S(()=>s!==null?(s.value&L.Open)===L.Open:t.menuState.value===0);return()=>{var a,v;let l={open:t.menuState.value===0},{id:i,...o}=e,n={"aria-activedescendant":t.activeItemIndex.value===null||(a=t.items.value[t.activeItemIndex.value])==null?void 0:a.id,"aria-labelledby":(v=y(t.buttonRef))==null?void 0:v.id,id:i,onKeydown:u,onKeyup:c,role:"menu",tabIndex:0,ref:t.itemsRef};return F({ourProps:n,theirProps:o,slot:l,attrs:m,slots:I,features:W.RenderStrategy|W.Static,visible:r.value,name:"MenuItems"})}}}),qe=$({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-menu-item-${V()}`}},setup(e,{slots:m,attrs:I,expose:b}){let t=j("MenuItem"),f=k(null);b({el:f,$el:f});let u=S(()=>t.activeItemIndex.value!==null?t.items.value[t.activeItemIndex.value].id===e.id:!1),c=Fe(f),s=S(()=>({disabled:e.disabled,get textValue(){return c()},domRef:f}));x(()=>t.registerItem(e.id,s)),pe(()=>t.unregisterItem(e.id)),ve(()=>{t.menuState.value===0&&u.value&&t.activationTrigger.value!==0&&D(()=>{var n,d;return(d=(n=y(f))==null?void 0:n.scrollIntoView)==null?void 0:d.call(n,{block:"nearest"})})});function r(n){if(e.disabled)return n.preventDefault();t.closeMenu(),oe(y(t.buttonRef))}function a(){if(e.disabled)return t.goToItem(h.Nothing);t.goToItem(h.Specific,e.id)}let v=De();function l(n){v.update(n)}function i(n){v.wasMoved(n)&&(e.disabled||u.value||t.goToItem(h.Specific,e.id,0))}function o(n){v.wasMoved(n)&&(e.disabled||u.value&&t.goToItem(h.Nothing))}return()=>{let{disabled:n}=e,d={active:u.value,disabled:n,close:t.closeMenu},{id:p,...O}=e;return F({ourProps:{id:p,ref:f,role:"menuitem",tabIndex:n===!0?void 0:-1,"aria-disabled":n===!0?!0:void 0,disabled:void 0,onClick:r,onFocus:a,onPointerenter:l,onMouseenter:l,onPointermove:i,onMousemove:i,onPointerleave:o,onMouseleave:o},theirProps:{...I,...O},slot:d,attrs:I,slots:m,name:"MenuItem"})}}});const Qe=be(Y.ui.strategy,Y.ui.dropdown,ge),Ye=$({components:{HMenu:Ke,HMenuButton:Ve,HMenuItems:ze,HMenuItem:qe,UIcon:ee,UAvatar:ae,UKbd:ne},inheritAttrs:!1,props:{items:{type:Array,default:()=>[]},mode:{type:String,default:"click",validator:e=>["click","hover"].includes(e)},disabled:{type:Boolean,default:!1},popper:{type:Object,default:()=>({})},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:m,attrs:I}=ye("dropdown",Z(e,"ui"),Qe,Z(e,"class")),b=S(()=>Ie(e.mode==="hover"?{offsetDistance:0}:{},e.popper,m.value.popper)),[t,f]=we(b.value),u=k(null);let c=null,s=null;x(()=>{setTimeout(()=>{var d;const o=(d=t.value)==null?void 0:d.$.provides;if(!o)return;const n=Object.getOwnPropertySymbols(o);u.value=n.length&&o[n[0]]},200)});const r=S(()=>{var n,d;const o=((n=e.popper)==null?void 0:n.offsetDistance)||((d=m.value.popper)==null?void 0:d.offsetDistance)||8;return e.mode==="hover"?{paddingTop:`${o}px`,paddingBottom:`${o}px`}:{}});function a(){e.mode!=="hover"||!u.value||(s&&(clearTimeout(s),s=null),u.value.menuState!==0&&(c=c||setTimeout(()=>{u.value.openMenu&&u.value.openMenu(),c=null},e.openDelay)))}function v(){e.mode!=="hover"||!u.value||(c&&(clearTimeout(c),c=null),u.value.menuState!==1&&(s=s||setTimeout(()=>{u.value.closeMenu&&u.value.closeMenu(),s=null},e.closeDelay)))}function l(o,n,{href:d,navigate:p,close:O,isExternal:C}){n.click&&n.click(o),d&&!C&&(p(o),O())}return{ui:m,attrs:I,popper:b,trigger:t,container:f,containerStyle:r,onMouseOver:a,onMouseLeave:v,onClick:l,omit:Me,NuxtLink:te}}}),Ze=["disabled"];function Ge(e,m,I,b,t,f){const u=N("HMenuButton"),c=ee,s=ae,r=ne,a=N("HMenuItem"),v=te,l=N("HMenuItems"),i=N("HMenu");return M(),P(i,E({as:"div",class:e.ui.wrapper},e.attrs,{onMouseleave:e.onMouseLeave}),{default:w(({open:o})=>[B(u,{ref:"trigger",as:"div",disabled:e.disabled,class:R(e.ui.trigger),role:"button",onMouseover:e.onMouseOver},{default:w(()=>[G(e.$slots,"default",{open:o,disabled:e.disabled},()=>[U("button",{disabled:e.disabled}," Open ",8,Ze)])]),_:2},1032,["disabled","class","onMouseover"]),o&&e.items.length?(M(),T("div",{key:0,ref:"container",class:R([e.ui.container,e.ui.width]),style:he(e.containerStyle),onMouseover:m[0]||(m[0]=(...n)=>e.onMouseOver&&e.onMouseOver(...n))},[B(ke,E({appear:""},e.ui.transition),{default:w(()=>[U("div",null,[e.popper.arrow?(M(),T("div",{key:0,"data-popper-arrow":"",class:R(Object.values(e.ui.arrow))},null,2)):H("",!0),B(l,{class:R([e.ui.base,e.ui.divide,e.ui.ring,e.ui.rounded,e.ui.shadow,e.ui.background,e.ui.height]),static:""},{default:w(()=>[(M(!0),T(_,null,K(e.items,(n,d)=>(M(),T("div",{key:d,class:R(e.ui.padding)},[(M(!0),T(_,null,K(n,(p,O)=>(M(),P(v,E({key:O},e.omit(p,["label","slot","icon","iconClass","avatar","shortcuts","disabled","click"]),{custom:""}),{default:w(({href:C,target:le,rel:se,navigate:re,isExternal:ie})=>[B(a,{disabled:p.disabled},{default:w(({active:z,disabled:q,close:de})=>[(M(),P(Se(C?"a":"button"),{href:q?void 0:C,rel:se,target:le,class:R([e.ui.item.base,e.ui.item.padding,e.ui.item.size,e.ui.item.rounded,z?e.ui.item.active:e.ui.item.inactive,q&&e.ui.item.disabled]),onClick:A=>e.onClick(A,p,{href:C,navigate:re,close:de,isExternal:ie})},{default:w(()=>[G(e.$slots,p.slot||"item",{item:p},()=>{var A;return[p.icon?(M(),P(c,{key:0,name:p.icon,class:R([e.ui.item.icon.base,z?e.ui.item.icon.active:e.ui.item.icon.inactive,p.iconClass])},null,8,["name","class"])):p.avatar?(M(),P(s,E({key:1},{size:e.ui.item.avatar.size,...p.avatar},{class:e.ui.item.avatar.base}),null,16,["class"])):H("",!0),U("span",{class:R(e.ui.item.label)},J(p.label),3),(A=p.shortcuts)!=null&&A.length?(M(),T("span",{key:2,class:R(e.ui.item.shortcuts)},[(M(!0),T(_,null,K(p.shortcuts,Q=>(M(),P(r,{key:Q},{default:w(()=>[Re(J(Q),1)]),_:2},1024))),128))],2)):H("",!0)]})]),_:2},1032,["href","rel","target","class","onClick"]))]),_:2},1032,["disabled"])]),_:2},1040))),128))],2))),128))]),_:3},8,["class"])])]),_:3},16)],38)):H("",!0)]),_:3},16,["class","onMouseleave"])}const it=fe(Ye,[["render",Ge]]);export{it as default};
